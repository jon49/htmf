(function(){document.querySelectorAll("[hf-hidden]").forEach(a=>a instanceof HTMLElement&&(a.style.visibility="hidden")),document.addEventListener("submit",async b=>{try{const c=b.target,d=document.activeElement;if(c.hasAttribute("hf-ignore")||d.hasAttribute("hf-ignore"))return;b.preventDefault();const k=new FormData(c),h=d.formMethod||c.method,f=new URL(d.getAttribute("formAction")&&d.formAction||c.action),i={method:h,credentials:"same-origin",headers:new Headers({"HF-Request":"true"})};if(h==="post")i.body=new URLSearchParams([...k]);else{const a=new URLSearchParams(k).toString();a&&(f.search+=(f.search?"&":"?")+a)}const g=await fetch(f.href,i),j=g.headers.get("content-type"),e=j.indexOf("application/json")>-1?"json":j.indexOf("html")>-1?"html":"text";if(e&&e.indexOf("application/json")!==-1){let a=JSON.parse(await g.json());document.dispatchEvent(new CustomEvent("received-json",{bubbles:!1,detail:{data:a,form:c,button:d}}))}else{let b=await g.text();a({contentType:e,text:b,form:c})}}catch(a){console.error(a);var c=b?.target;c instanceof HTMLFormElement&&c.submit()}});function a(a){if(a.contentType!=="html")return;const c=document.createElement("template");c.innerHTML=a.text.trim();for(const b of c.content.childNodes){if(!(b instanceof HTMLElement))continue;const e=b.getAttribute("target");let d,f;switch(e?(d=document.querySelector(e),f=b.getAttribute("hf-swap")||"append"):b.id?d=document.getElementById(b.id):d=document.body,d||(d=a.form),f){case"append":d.append(b);break;case"prepend":d.prepend(b);break;case"replace":default:d.replaceWith(b)}}var b=document.querySelector("[autofocus]");b instanceof HTMLElement&&(b.removeAttribute("autofocus"),b.focus())}})()